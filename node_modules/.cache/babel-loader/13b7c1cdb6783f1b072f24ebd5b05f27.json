{"ast":null,"code":"var _jsxFileName = \"/home/emanuelle/Trybe/frontend/sd-07-project-starwars-datatable-hooks/src/context/StarWarsProvider.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport StarWarsContext from './StarWarsContext';\nimport { getPlanets } from '../services/starwarsAPI';\n\nconst StarWarsProvider = ({\n  children\n}) => {\n  const [data, setDataPlanets] = useState([]);\n  const [filterName, setFilterName] = useState('');\n  const [filterColumn, setColumn] = useState('');\n  const [filterComparison, setComparison] = useState('');\n  const [filterValue, setValue] = useState('');\n  const [filteredData, setFilteredData] = useState(data);\n  useEffect(() => {\n    async function fetchPlanets() {\n      const {\n        results\n      } = await getPlanets();\n      const dataPlanets = results;\n      setDataPlanets(dataPlanets);\n      setFilteredData(dataPlanets);\n    }\n\n    fetchPlanets();\n  });\n\n  const handleFilterByName = input => {\n    const {\n      value\n    } = input.target;\n    setFilterName(value); // const dataFilteredByName = data.filter((planet) => planet.name.includes(value));\n    // setFilteredData(dataFilteredByName);\n  };\n\n  const handleInputColumn = input => {\n    const {\n      value\n    } = input.target;\n    setColumn(value);\n  };\n\n  const handleInputComparison = input => {\n    const {\n      value\n    } = input.target;\n    setComparison(value);\n  };\n\n  const handleInputValue = input => {\n    const {\n      value\n    } = input.target;\n    setValue(value);\n  };\n\n  const filterDataButton = () => {\n    if (filterColumn !== '' && filterComparison !== '' && filterValue !== '') {\n      switch (filterComparison) {\n        case 'maior que':\n          setFilteredData(data.filter(planet => parseFloat(planet[filterColumn]) > parseFloat(filterValue)));\n          break;\n\n        case 'menor que':\n          setFilteredData(data.filter(planet => parseFloat(planet[filterColumn]) < parseFloat(filterValue)));\n          break;\n\n        case 'igual a':\n          setFilteredData(data.filter(planet => parseFloat(planet[filterColumn]) === parseFloat(filterValue)));\n          break;\n\n        default:\n          setFilteredData(data);\n      }\n    } else setFilteredData(data);\n  };\n\n  const context = {\n    data,\n    // resultado da api\n    filteredData,\n    filters: {\n      filterByName: {\n        name: filterName\n      },\n      filterByNumericValues: [{\n        column: filterColumn,\n        comparison: filterComparison,\n        value: filterValue\n      }]\n    },\n    handleFilterByName,\n    handleInputColumn,\n    handleInputComparison,\n    handleInputValue,\n    setFilteredData,\n    filterDataButton\n  };\n  return /*#__PURE__*/React.createElement(StarWarsContext.Provider, {\n    value: context,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport default StarWarsProvider;\nStarWarsProvider.propTypes = {\n  children: PropTypes.element.isRequired\n};","map":{"version":3,"sources":["/home/emanuelle/Trybe/frontend/sd-07-project-starwars-datatable-hooks/src/context/StarWarsProvider.js"],"names":["React","useEffect","useState","PropTypes","StarWarsContext","getPlanets","StarWarsProvider","children","data","setDataPlanets","filterName","setFilterName","filterColumn","setColumn","filterComparison","setComparison","filterValue","setValue","filteredData","setFilteredData","fetchPlanets","results","dataPlanets","handleFilterByName","input","value","target","handleInputColumn","handleInputComparison","handleInputValue","filterDataButton","filter","planet","parseFloat","context","filters","filterByName","name","filterByNumericValues","column","comparison","propTypes","element","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport StarWarsContext from './StarWarsContext';\nimport { getPlanets } from '../services/starwarsAPI';\n\nconst StarWarsProvider = ({ children }) => {\n  const [data, setDataPlanets] = useState([]);\n  const [filterName, setFilterName] = useState('');\n  const [filterColumn, setColumn] = useState('');\n  const [filterComparison, setComparison] = useState('');\n  const [filterValue, setValue] = useState('');\n  const [filteredData, setFilteredData] = useState(data);\n\n  useEffect(() => {\n    async function fetchPlanets() {\n      const { results } = await getPlanets();\n      const dataPlanets = results;\n      setDataPlanets(dataPlanets);\n      setFilteredData(dataPlanets);\n    }\n    fetchPlanets();\n  });\n\n  const handleFilterByName = (input) => {\n    const { value } = input.target;\n    setFilterName(value);\n    // const dataFilteredByName = data.filter((planet) => planet.name.includes(value));\n    // setFilteredData(dataFilteredByName);\n  };\n\n  const handleInputColumn = (input) => {\n    const { value } = input.target;\n    setColumn(value);\n  };\n\n  const handleInputComparison = (input) => {\n    const { value } = input.target;\n    setComparison(value);\n  };\n\n  const handleInputValue = (input) => {\n    const { value } = input.target;\n    setValue(value);\n  };\n\n  const filterDataButton = () => {\n    if (filterColumn !== '' && filterComparison !== '' && filterValue !== '') {\n      switch (filterComparison) {\n      case 'maior que':\n        setFilteredData(data.filter((planet) => (parseFloat(planet[filterColumn]) > parseFloat(filterValue))));\n        break;\n      case 'menor que':\n        setFilteredData(data.filter((planet) => (parseFloat(planet[filterColumn]) < parseFloat(filterValue))));\n        break;\n      case 'igual a':\n        setFilteredData(data\n          .filter((planet) => (parseFloat(planet[filterColumn]) === parseFloat(filterValue))));\n        break;\n      default:\n        setFilteredData(data);\n      }\n    } else setFilteredData(data);\n  };\n\n  const context = {\n    data, // resultado da api\n    filteredData,\n    filters: {\n      filterByName: {\n        name: filterName,\n      },\n      filterByNumericValues: [\n        {\n          column: filterColumn,\n          comparison: filterComparison,\n          value: filterValue,\n        },\n      ],\n    },\n    handleFilterByName,\n    handleInputColumn,\n    handleInputComparison,\n    handleInputValue,\n    setFilteredData,\n    filterDataButton,\n  };\n\n  return (\n    <StarWarsContext.Provider value={ context }>\n      {children}\n    </StarWarsContext.Provider>\n  );\n};\n\nexport default StarWarsProvider;\n\nStarWarsProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}