{"ast":null,"code":"var _jsxFileName = \"/home/emanuelle/Trybe/frontend/projects/sd-07-project-starwars-datatable-hooks/src/context/StarWarsProvider.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport StarWarsContext from './StarWarsContext';\nimport { getPlanets } from '../services/starwarsAPI';\n\nconst StarWarsProvider = ({\n  children\n}) => {\n  const [data, setDataPlanets] = useState([]);\n  const [filterName, setFilterName] = useState('');\n  const [filterColumn, setColumn] = useState('');\n  const [filterComparison, setComparison] = useState('');\n  const [filterValue, setValue] = useState('');\n  const [filteredData, setFilteredData] = useState(data); // const [filterObject, setFilterObject] = useState({});\n\n  const [filtersArray, setFiltersArray] = useState([]);\n  useEffect(() => {\n    async function fetchPlanets() {\n      const {\n        results\n      } = await getPlanets();\n      const dataPlanets = results;\n      setDataPlanets(dataPlanets);\n      setFilteredData(dataPlanets);\n    }\n\n    fetchPlanets();\n  }, []);\n\n  const handleFilterByName = input => {\n    const {\n      value\n    } = input.target;\n    setFilterName(value);\n  };\n\n  const handleInputColumn = input => {\n    const {\n      value\n    } = input.target;\n    setColumn(value);\n  };\n\n  const handleInputComparison = input => {\n    const {\n      value\n    } = input.target;\n    setComparison(value);\n  };\n\n  const handleInputValue = input => {\n    const {\n      value\n    } = input.target;\n    setValue(value);\n  };\n\n  const filterPlanets = (column, comparison, value) => {\n    switch (comparison) {\n      case 'maior que':\n        setFilteredData(filteredData.filter(planet => parseFloat(planet[column]) > parseFloat(value)));\n        break;\n\n      case 'menor que':\n        setFilteredData(filteredData.filter(planet => parseFloat(planet[column]) < parseFloat(value)));\n        break;\n\n      case 'igual a':\n        setFilteredData(filteredData.filter(planet => parseFloat(planet[column]) === parseFloat(value)));\n        break;\n\n      default:\n        setFilteredData(filteredData);\n    }\n  };\n\n  const options = ['population', 'orbital_period', 'diameter', 'rotation_period', 'surface_water'];\n  const [optionsFiltered, setOptionsColumn] = useState(options);\n\n  const filterDataButton = () => {\n    if (filterColumn !== '' && filterComparison !== '' && filterValue !== '') {\n      setFiltersArray([...filtersArray, {\n        column: filterColumn,\n        comparison: filterComparison,\n        value: filterValue\n      }]);\n      set; // filterPlanets(filterColumn, filterComparison, filterValue);\n      // filtersArray.forEach((filter) => filterPlanets(filter.column, filter.comparison, filter.value));\n      // console.log(filtersArray);\n    } else setFilteredData(filteredData);\n  };\n\n  useEffect(() => {\n    console.log(filtersArray);\n    filtersArray.forEach(filter => filterPlanets(filter.column, filter.comparison, filter.value));\n  }, [filtersArray]);\n\n  const deleteFilter = event => {\n    const {\n      value\n    } = event.target;\n    const removedFilter = filtersArray.filter(filter => filter.column !== value);\n    setFiltersArray(removedFilter);\n    setFilteredData(data);\n  };\n\n  const context = {\n    data,\n    filteredData,\n    filters: {\n      filterByName: {\n        name: filterName\n      },\n      // filterByNumericValues: [\n      //   {\n      //     column: filterColumn,\n      //     comparison: filterComparison,\n      //     value: filterValue,\n      //   },\n      // ],\n      filterByNumericValues: filtersArray\n    },\n    handleFilterByName,\n    handleInputColumn,\n    handleInputComparison,\n    handleInputValue,\n    setFilteredData,\n    filterDataButton,\n    deleteFilter\n  };\n  return /*#__PURE__*/React.createElement(StarWarsContext.Provider, {\n    value: context,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport default StarWarsProvider;\nStarWarsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};","map":{"version":3,"sources":["/home/emanuelle/Trybe/frontend/projects/sd-07-project-starwars-datatable-hooks/src/context/StarWarsProvider.js"],"names":["React","useEffect","useState","PropTypes","StarWarsContext","getPlanets","StarWarsProvider","children","data","setDataPlanets","filterName","setFilterName","filterColumn","setColumn","filterComparison","setComparison","filterValue","setValue","filteredData","setFilteredData","filtersArray","setFiltersArray","fetchPlanets","results","dataPlanets","handleFilterByName","input","value","target","handleInputColumn","handleInputComparison","handleInputValue","filterPlanets","column","comparison","filter","planet","parseFloat","options","optionsFiltered","setOptionsColumn","filterDataButton","set","console","log","forEach","deleteFilter","event","removedFilter","context","filters","filterByName","name","filterByNumericValues","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport StarWarsContext from './StarWarsContext';\nimport { getPlanets } from '../services/starwarsAPI';\n\nconst StarWarsProvider = ({ children }) => {\n  const [data, setDataPlanets] = useState([]);\n  const [filterName, setFilterName] = useState('');\n  const [filterColumn, setColumn] = useState('');\n  const [filterComparison, setComparison] = useState('');\n  const [filterValue, setValue] = useState('');\n  const [filteredData, setFilteredData] = useState(data);\n  // const [filterObject, setFilterObject] = useState({});\n  const [filtersArray, setFiltersArray] = useState([]);\n\n  useEffect(() => {\n    async function fetchPlanets() {\n      const { results } = await getPlanets();\n      const dataPlanets = results;\n      setDataPlanets(dataPlanets);\n      setFilteredData(dataPlanets);\n    }\n    fetchPlanets();\n  }, []);\n\n  const handleFilterByName = (input) => {\n    const { value } = input.target;\n    setFilterName(value);\n  };\n\n  const handleInputColumn = (input) => {\n    const { value } = input.target;\n    setColumn(value);\n  };\n\n  const handleInputComparison = (input) => {\n    const { value } = input.target;\n    setComparison(value);\n  };\n\n  const handleInputValue = (input) => {\n    const { value } = input.target;\n    setValue(value);\n  };\n\n  const filterPlanets = (column, comparison, value) => {\n    switch (comparison) {\n    case 'maior que':\n      setFilteredData(filteredData\n        .filter((planet) => (\n          parseFloat(planet[column]) > parseFloat(value))));\n      break;\n    case 'menor que':\n      setFilteredData(filteredData\n        .filter((planet) => (\n          parseFloat(planet[column]) < parseFloat(value))));\n      break;\n    case 'igual a':\n      setFilteredData(filteredData\n        .filter((planet) => (\n          parseFloat(planet[column]) === parseFloat(value))));\n      break;\n    default:\n      setFilteredData(filteredData);\n    }\n  };\n  const options = [\n    'population',\n    'orbital_period',\n    'diameter',\n    'rotation_period',\n    'surface_water',\n  ];\n\n  const [optionsFiltered, setOptionsColumn] = useState(options);\n  const filterDataButton = () => {\n    if (filterColumn !== '' && filterComparison !== '' && filterValue !== '') {\n      setFiltersArray([...filtersArray, {\n        column: filterColumn,\n        comparison: filterComparison,\n        value: filterValue,\n      }]);\n      set\n      // filterPlanets(filterColumn, filterComparison, filterValue);\n      // filtersArray.forEach((filter) => filterPlanets(filter.column, filter.comparison, filter.value));\n      // console.log(filtersArray);\n    } else setFilteredData(filteredData);\n  };\n\n  useEffect(() => {\n    console.log(filtersArray);\n    filtersArray.forEach((filter) => filterPlanets(filter.column, filter.comparison, filter.value));\n  }, [filtersArray]);\n\n  const deleteFilter = (event) => {\n    const { value } = event.target;\n    const removedFilter = filtersArray.filter((filter) => (filter.column !== value));\n    setFiltersArray(removedFilter);\n    setFilteredData(data);\n  };\n\n  const context = {\n    data,\n    filteredData,\n    filters: {\n      filterByName: {\n        name: filterName,\n      },\n      // filterByNumericValues: [\n      //   {\n      //     column: filterColumn,\n      //     comparison: filterComparison,\n      //     value: filterValue,\n      //   },\n      // ],\n      filterByNumericValues: filtersArray,\n    },\n    handleFilterByName,\n    handleInputColumn,\n    handleInputComparison,\n    handleInputValue,\n    setFilteredData,\n    filterDataButton,\n    deleteFilter,\n  };\n\n  return (\n    <StarWarsContext.Provider value={ context }>\n      {children}\n    </StarWarsContext.Provider>\n  );\n};\n\nexport default StarWarsProvider;\n\nStarWarsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}